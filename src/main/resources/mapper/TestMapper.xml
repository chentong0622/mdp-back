<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.heeexy.example.dao.TestDao">

    <resultMap id="BaseResultMap" type="com.heeexy.example.domain.entity.Article">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="content" property="content" jdbcType="VARCHAR"/>
        <result column="create_time" property="createTime" jdbcType="VARCHAR"/>
        <result column="update_time" property="updateTime" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="Base_Column_List">
        <trim prefix="" suffix="" suffixOverrides=",">
            id,
            content,
            create_time,
            update_time,
        </trim>
    </sql>

    <select id="getArticle" resultMap="BaseResultMap"  parameterType="INTEGER">
        select
        <include refid="Base_Column_List"/>
        from article
        where id = #{id,jdbcType=INTEGER}
        and delete_status = 1
    </select>

    <select id="queryList" resultMap="BaseResultMap" parameterType="com.heeexy.example.condition.ArticleCondition">
        select
        <include refid="Base_Column_List"/>
        from article
        <where>
            delete_status=1
            <if test="id != null">
                and id = #{id,jdbcType=INTEGER}
            </if>
            <if test="content != null">
                and content = #{content,jdbcType=VARCHAR}
            </if>
            <if test="createStartTime != null and createStartTime != ''">
                and <![CDATA[create_time >= #{createStartTime,jdbcType=VARCHAR}]]>
            </if>
            <if test="createEndTime != null and createEndTime != ''">
                and <![CDATA[create_time <= #{createEndTime,jdbcType=VARCHAR}]]>
            </if>
            <if test="updateStartTime != null and updateStartTime != ''">
                and <![CDATA[update_time >= #{updateStartTime,jdbcType=VARCHAR}]]>
            </if>
            <if test="updateEndTime != null and updateEndTime != ''">
                and <![CDATA[update_time <= #{updateEndTime,jdbcType=VARCHAR}]]>
            </if>
        </where>
    </select>

</mapper>
